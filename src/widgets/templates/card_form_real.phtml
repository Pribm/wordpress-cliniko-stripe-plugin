<?php
if (!defined('ABSPATH')) exit;
$details_background = esc_attr($settings['details_background']);
$details_border_color = esc_attr($settings['details_border_color']);
$details_border_radius = esc_attr($settings['details_border_radius']['size']);
$summary_heading_color = esc_attr($settings['summary_heading_color']);
$summary_text_color = esc_attr($settings['summary_text_color']);
$summary_price_color = esc_attr($settings['summary_price_color']);
$gap_between_columns = esc_attr($settings['gap_between_columns']['size']);
?>

<div
id="payment_form"
  style="display: flex; flex-wrap: wrap; gap: <?php echo $gap_between_columns; ?>px; justify-content: space-between; font-family: <?php echo $font_family; ?>; background: <?php echo $color_background; ?>; color: <?php echo $color_text; ?>; border: 1px solid #dcdcdc; border-radius: <?php echo $border_radius; ?>px; padding: 20px;">

  <!-- LEFT COLUMN: Stripe Payment -->
  <div style="flex: 1 1 300px; min-width: 280px;">
    <div id="payment-element" style="margin: 20px 0;"></div>

    <button id="submit-button" style="<?php echo $style_button; ?>">
      <?php echo $button_label; ?>
    </button>
  </div>

  <!-- RIGHT COLUMN: Order Summary -->
  <div style="flex: 1 1 300px; min-width: 280px; background: <?php echo $details_background; ?>; border: 1px solid <?php echo $details_border_color; ?>; border-radius: <?php echo $details_border_radius; ?>px; padding: 20px;" id="order-summary">
    <h3 class="summary-heading" style="margin-top: 0; color: <?php echo $summary_heading_color; ?>;">Order Summary</h3>

    <p class="summary-text" style="color: <?php echo $summary_text_color; ?>;"><strong>Service:</strong> <span id="summary-name">Loading...</span></p>
    <p class="summary-text" style="color: <?php echo $summary_text_color; ?>;"><strong>Description:</strong> <span id="summary-description">Loading...</span></p>
    <p class="summary-text" style="color: <?php echo $summary_text_color; ?>;"><strong>Duration:</strong> <span id="summary-duration">--</span> minutes</p>
    <p class="summary-text" style="color: <?php echo $summary_text_color; ?>;"><strong>Tax:</strong> Included</p>
    <p class="summary-price" style="font-size: 18px; color: <?php echo $summary_price_color; ?>;">
      <strong>Total:</strong> $<span id="summary-price">--</span> AUD
    </p>
    <!-- BACK BUTTON -->
    <?php if (!empty($settings['show_back_button']) && $settings['show_back_button'] === 'yes'): ?>
      <div style="text-align: <?php echo esc_attr($settings['back_button_align'] ?? 'center'); ?>; margin-top: <?php echo esc_attr($settings['back_button_margin_top']['size'] ?? 30); ?>px;">
        <button id="go-back-button"
          style="background-color: transparent; color: <?php echo esc_attr($settings['back_button_color'] ?? '#005fcc'); ?>; border: 1px solid <?php echo esc_attr($settings['back_button_color'] ?? '#005fcc'); ?>; border-radius: 4px; padding: 10px 20px; font-size: 14px; cursor: pointer; transition: all 0.3s ease;"
          onmouseover="this.style.backgroundColor='<?php echo esc_attr($settings['back_button_bg'] ?? '#005fcc'); ?>'; this.style.color='<?php echo esc_attr($settings['back_button_hover_text'] ?? '#ffffff'); ?>';"
          onmouseout="this.style.backgroundColor='transparent'; this.style.color='<?php echo esc_attr($settings['back_button_color'] ?? '#005fcc'); ?>';"
        >
          ‚Üê Go Back
        </button>
      </div>
    <?php endif; ?>
    <!-- END BACK BUTTON -->
  </div>

</div>
